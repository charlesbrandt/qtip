define(["module","jquery","ko","sortable","tree","moment"],function(e,o,n,a,t){function l(){var e=this;if(e.root=new t("root"),e.columns=subject.columns?subject.columns.split(/[ ,]+/):method.columns.split(/[ ,]+/),subject.json)e.root.from_json(subject.json),e.available=e.root.has_name("available"),e.placed=e.root.has_name("placed"),e.responses=e.root.has_name("responses"),e.neutral=e.root.has_name("neutral");else{e.available=new t("available");for(var o,a=method.statements.split(/\n/),l=1;l<=a.length;l++)s="statement"+l,o=new t(s),o.content(a[l-1]),e.available.append(o);e.placed=new t("placed");for(var s,i,l=1;l<=e.columns.length;l++)s="column"+l,i=new t(s),e.placed.append(i);e.responses=new t("responses");for(var r,l=1;6>=l;l++)s="",r=new t(s),e.responses.append(r);neutral=new t("neutral"),e.root.append(e.available),e.root.append(e.placed),e.root.append(e.responses),e.root.append(neutral)}for(var p,c=0,l=0;l<e.columns.length;l++)p=parseInt(e.columns[l]),c+=p,e.placed.children()[l].max(p);e.available.available=n.computed(function(){return!0}),e.position=n.observable(0),e.pos_total=n.computed(function(){var o=e.available.children().length,n=e.position()+1;return n+"/"+o}),e.complete=function(){e.responses.post("response update"),console.log(window.location.href),window.location.href=window.location.href+"thank_you"},e.next=function(){var o=e.available.children().length,n=e.position()+1;o>n?e.position(n):e.position(0)},e.previous=function(){var o=e.available.children().length,n=e.position()-1;0>n?o?e.position(o-1):e.position(0):e.position(n)},e.cur_card=n.computed(function(){var o=e.available.children().length;return o&&e.position()<o?e.available.children()[e.position()]:o?(e.previous(),e.available.children()[e.position()]):""}),e.done=n.observable(!1),e.toggle_done=function(){e.done()?e.done(!1):e.done(!0)}}n.applyBindings(new l,document.getElementById("htmlTop")),console.log("made it here!!")});